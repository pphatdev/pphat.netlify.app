.tiptap.ProseMirror {
    --tt-inline-code-bg-color: hsl(var(--muted));
    --tt-inline-code-text-color: hsl(var(--foreground));
    --tt-inline-code-border-color: hsl(var(--border));
    --tt-codeblock-bg: hsl(var(--muted));
    --tt-codeblock-text: hsl(var(--foreground));
    --tt-codeblock-border: hsl(var(--border));

    .dark & {
        --tt-inline-code-bg-color: hsl(var(--muted));
        --tt-inline-code-text-color: hsl(var(--foreground));
        --tt-inline-code-border-color: hsl(var(--border));
        --tt-codeblock-bg: hsl(var(--muted));
        --tt-codeblock-text: hsl(var(--foreground));
        --tt-codeblock-border: hsl(var(--border));
    }
}

/* =====================
   CODE FORMATTING
   ===================== */
.tiptap.ProseMirror {

    /* Inline code */
    code:not(pre code) {
        background-color: var(--tt-inline-code-bg-color);
        color: var(--tt-inline-code-text-color);
        border: 1px solid var(--tt-inline-code-border-color);
        font-family: "JetBrains Mono", "Consolas", "Monaco", monospace;
        font-size: 0.875em;
        line-height: 1.4;
        border-radius: 0.375rem;
        padding: 0.1em 0.3em;
        font-weight: 500;
    }

    /* Code blocks - use more specific selectors */
    pre[class*="language-"] {
        background-color: var(--tt-codeblock-bg) !important;
        color: var(--tt-codeblock-text) !important;
        border: 1px solid var(--tt-codeblock-border);
        margin: 1.5em 0;
        padding: 1rem;
        font-size: 0.875rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        font-family: "JetBrains Mono", "Consolas", "Monaco", monospace;
        line-height: 1.5;

        code {
            background-color: transparent !important;
            border: none !important;
            border-radius: 0;
            color: inherit !important;
            padding: 0 !important;
            font-size: inherit;
        }
    }

    /* Fallback for non-language specific code blocks */
    pre:not([class*="language-"]) {
        background-color: var(--tt-codeblock-bg);
        color: var(--tt-codeblock-text);
        border: 1px solid var(--tt-codeblock-border);
        margin: 1.5em 0;
        padding: 1rem;
        font-size: 0.875rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        font-family: "JetBrains Mono", "Consolas", "Monaco", monospace;
        line-height: 1.5;

        code {
            background-color: transparent;
            border: none;
            border-radius: 0;
            color: inherit;
            padding: 0;
        }
    }
}

/* =====================
   SYNTAX HIGHLIGHTING
   ===================== */
.hljs {
    color: hsl(var(--foreground));
    background: hsl(var(--muted));
}

.hljs-comment,
.hljs-quote {
    color: hsl(var(--muted-foreground));
    font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
    color: #d73a49;
}

.dark .hljs-keyword,
.dark .hljs-selector-tag,
.dark .hljs-subst {
    color: #ff7b72;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
    color: #005cc5;
}

.dark .hljs-number,
.dark .hljs-literal,
.dark .hljs-variable,
.dark .hljs-template-variable,
.dark .hljs-tag .hljs-attr {
    color: #79c0ff;
}

.hljs-string,
.hljs-doctag {
    color: #032f62;
}

.dark .hljs-string,
.dark .hljs-doctag {
    color: #a5d6ff;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
    color: #6f42c1;
    font-weight: bold;
}

.dark .hljs-title,
.dark .hljs-section,
.dark .hljs-selector-id {
    color: #d2a8ff;
    font-weight: bold;
}

.hljs-type,
.hljs-class .hljs-title {
    color: #d73a49;
    font-weight: bold;
}

.dark .hljs-type,
.dark .hljs-class .hljs-title {
    color: #ff7b72;
    font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
    color: #22863a;
    font-weight: normal;
}

.dark .hljs-tag,
.dark .hljs-name,
.dark .hljs-attribute {
    color: #7ee787;
    font-weight: normal;
}

.hljs-regexp,
.hljs-link {
    color: #e36209;
}

.dark .hljs-regexp,
.dark .hljs-link {
    color: #f2cc60;
}

.hljs-symbol,
.hljs-bullet {
    color: #005cc5;
}

.dark .hljs-symbol,
.dark .hljs-bullet {
    color: #79c0ff;
}

.hljs-built_in,
.hljs-builtin-name {
    color: #005cc5;
}

.dark .hljs-built_in,
.dark .hljs-builtin-name {
    color: #79c0ff;
}

.hljs-meta {
    color: #6f42c1;
}

.dark .hljs-meta {
    color: #d2a8ff;
}

.hljs-deletion {
    background: #ffeef0;
}

.dark .hljs-deletion {
    background: #490202;
}

.hljs-addition {
    background: #f0fff4;
}

.dark .hljs-addition {
    background: #0f5132;
}

.hljs-emphasis {
    font-style: italic;
}

.hljs-strong {
    font-weight: bold;
}